(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-798ec4ae"],{"1fe7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    系统管理\n")])},a=[],s={name:"SysCfg"},l=s,o=n("2877"),r=Object(o["a"])(l,i,a,!1,null,"23cce413",null);t["default"]=r.exports},"418a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"通过用户名搜索用户...","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.doSearch}},[e._v("搜索")])],1),n("div",{staticClass:"hr-container"},e._l(e.hrs,(function(t,i){return n("el-card",{key:i,staticClass:"hr-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.name))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#e30007"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.deleteHr(t)}}})],1),n("div",[n("div",{staticClass:"img-container"},[n("img",{staticClass:"userface-img",attrs:{src:t.userface,alt:t.name,title:t.name}})]),n("div",{staticClass:"userinfo-container"},[n("div",[e._v("用户名："+e._s(t.name))]),n("div",[e._v("手机号码："+e._s(t.phone))]),n("div",[e._v("电话号码："+e._s(t.telephone))]),n("div",[e._v("地址："+e._s(t.address))]),n("div",[n("el-switch",{attrs:{"active-text":"启用","active-color":"#13ce66","inactive-color":"#ff4949","inactive-text":"禁用"},on:{change:function(n){return e.enabledChange(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"hr.enabled"}},[e._v(">\n                        ")])],1),n("div",[e._v("用户角色：\n                        "),e._l(t.roles,(function(t,i){return n("el-tag",{key:i,staticStyle:{"margin-right":"4px"},attrs:{type:"success"}},[e._v(e._s(t.nameZh)+"\n                        ")])})),n("el-popover",{attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{show:function(n){return e.showPop(t)},hide:function(n){return e.hidePop(t)}}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}},e._l(e.allroles,(function(e,t){return n("el-option",{key:t,attrs:{label:e.nameZh,value:e.id}})})),1),n("el-button",{attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1)],2),n("div",[e._v("备注："+e._s(t.remark))])])])])})),1)])},a=[],s=(n("ac6a"),n("7f7f"),{name:"SysHr",data:function(){return{keywords:"",hrs:[],selectedRoles:[],allroles:[]}},mounted:function(){this.initHrs()},methods:{deleteHr:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/hr/"+e.id).then((function(e){e&&t.initHrs()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},doSearch:function(){this.initHrs()},hidePop:function(e){var t=this,n=[];Object.assign(n,e.roles);var i=!1;if(n.length!=this.selectedRoles.length)i=!0;else{for(var a=0;a<n.length;a++)for(var s=n[a],l=0;l<this.selectedRoles.length;l++){var o=this.selectedRoles[l];if(s.id==o){n.splice(a,1),a--;break}}0!=n.length&&(i=!0)}if(i){var r="/system/hr/role?hrid="+e.id;this.selectedRoles.forEach((function(e){r+="&rids="+e})),this.putRequest(r).then((function(e){e&&t.initHrs()}))}},showPop:function(e){var t=this;this.initAllRoles();var n=e.roles;this.selectedRoles=[],n.forEach((function(e){t.selectedRoles.push(e.id)}))},enabledChange:function(e){var t=this;delete e.roles,this.putRequest("/system/hr/",e).then((function(e){e&&t.initHrs()}))},initAllRoles:function(){var e=this;this.getRequest("/system/hr/roles").then((function(t){t&&(e.allroles=t)}))},initHrs:function(){var e=this;this.getRequest("/system/hr/?keywords="+this.keywords).then((function(t){t&&(e.hrs=t)}))}}}),l=s,o=(n("ac12"),n("2877")),r=Object(o["a"])(l,i,a,!1,null,"4669c5ef",null);t["default"]=r.exports},"455d":function(e,t,n){"use strict";var i=n("a331"),a=n.n(i);a.a},"69f6":function(e,t,n){"use strict";var i=n("ed24"),a=n.n(i);a.a},8608:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    初始化数据库\n")])},a=[],s={name:"SysInit"},l=s,o=n("2877"),r=Object(o["a"])(l,i,a,!1,null,"5fd3d133",null);t["default"]=r.exports},"864e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    操作日志管理\n")])},a=[],s={name:"SysLog"},l=s,o=n("2877"),r=Object(o["a"])(l,i,a,!1,null,"160d2594",null);t["default"]=r.exports},"8ccb":function(e,t,n){},"8d67":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"部门管理",name:"first"}},[n("DepMana")],1),n("el-tab-pane",{attrs:{label:"职位管理",name:"second"}},[n("PosMana")],1),n("el-tab-pane",{attrs:{label:"职称管理",name:"third"}},[n("JobLevelMana")],1),n("el-tab-pane",{attrs:{label:"奖惩规则",name:"fourth"}},[n("EcMana")],1),n("el-tab-pane",{attrs:{label:"权限组",name:"fourth2"}},[n("PermissMana")],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"500px"}},[n("el-input",{attrs:{placeholder:"请输入部门名称进行搜索...","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"tree",staticStyle:{"margin-top":"10px"},attrs:{"expand-on-click-node":!1,data:e.deps,props:e.defaultProps,"filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[n("span",[e._v(e._s(i.label))]),n("span",[n("el-button",{staticClass:"depBtu",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.showAddView(a)}}},[e._v("\n            添加部门\n           ")]),n("el-button",{staticClass:"depBtu",attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.delDep(a)}}},[e._v("\n            删除部门\n          ")])],1)])}}])}),n("el-dialog",{attrs:{title:"添加部门",width:"40%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("table",[n("tr",[n("td",[n("el-tag",[e._v("上级部门")])],1),n("td",[e._v(e._s(e.pname))])]),n("tr",[n("td",[n("el-tag",[e._v("部门名称")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入部门名称..."},model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1)])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addDep()}}},[e._v("确 定")])],1)])],1)},l=[],o=(n("7f7f"),{name:"DepMana",data:function(){return{filterText:"",deps:[],defaultProps:{children:"children",label:"name"},dialogFormVisible:!1,dep:{name:"",parentId:-1},pname:""}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.initDeps()},methods:{delDep:function(e){var t=this;e.parent?this.$message.error("父部门删除失败"):this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/department/"+e.id).then((function(n){n&&t.removeDepFromDeps(t.deps,e.id)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeDepFromDeps:function(e,t,n){for(var i=0;i<t.length;i++){var a=t[i];if(a.id==n)return t.splice(i,1),void(0==t.length&&(e.parent=!1));this.removeDepFromDeps(a.children,n)}},addDepToDeps:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id==t.parentId)return i.children=i.children.concat(t),void(i.children.length>0&&(i.parent=!0));this.addDepToDeps(i.children,t)}},addDep:function(){var e=this;this.postRequest("/system/basic/department/",this.dep).then((function(t){t&&(e.initDep(),e.addDepToDeps(e.deps,t.obj),e.dialogFormVisible=!1)}))},showAddView:function(e){this.dep.parentId=e.id,this.pname=e.name,this.dialogFormVisible=!0},initDep:function(){this.dep={name:"",parentId:-1},this.pname=""},initDeps:function(){var e=this;this.getRequest("/system/basic/department/").then((function(t){t&&(e.deps=t)}))},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}}}),r=o,c=(n("69f6"),n("2877")),u=Object(c["a"])(r,s,l,!1,null,null,null),d=u.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"添加职位...","prefix-icon":"el-icon-plus"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addPosition(t)}},model:{value:e.pos.name,callback:function(t){e.$set(e.pos,"name",t)},expression:"pos.name"}}),n("el-button",{staticStyle:{"margin-left":"10px","background-color":"#8eebff"},attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.addPosition}},[e._v("\n            添加\n        ")])],1),n("div",{staticClass:"posTable"},[n("el-table",{staticStyle:{width:"70%"},attrs:{size:"small",data:e.positions,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"职位职称",width:"180"}}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"120"}}),n("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{type:"success"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editPosition(t.$index,t.row)}}},[e._v("编辑\n                    ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDeletePosition(t.$index,t.row)}}},[e._v("删除\n                    ")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.deleteMany}},[e._v("批量删除\n        ")])],1),n("el-dialog",{attrs:{title:"修改职位职称",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("div",[n("span",{staticStyle:{color:"#25aeff"}},[e._v("职位职称")]),n("el-input",{staticClass:"updatePosInput",attrs:{size:"small"},model:{value:e.updatePos.name,callback:function(t){e.$set(e.updatePos,"name",t)},expression:"updatePos.name"}})],1),n("div",[n("span",{staticStyle:{color:"#25aeff","margin-right":"20px"}},[e._v("是否禁用")]),n("el-switch",{attrs:{size:"small","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"禁用"},model:{value:e.updatePos.enabled,callback:function(t){e.$set(e.updatePos,"enabled",t)},expression:"updatePos.enabled"}})],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.doUpdatePosition}},[e._v("确 定")])],1)])],1)},p=[],f=(n("ac6a"),{name:"PosMana",data:function(){return{pos:{name:""},dialogVisible:!1,positions:[],updatePos:{name:"",enabled:!1},multipleSelection:[]}},mounted:function(){this.initPositions()},methods:{deleteMany:function(){var e=this;this.$confirm("此操作将永久删除["+this.multipleSelection.length+"]条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/pos/"+t).then((function(t){t&&e.initPositions()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},addPosition:function(){var e=this;this.pos.name?this.postRequest("/system/basic/pos/",this.pos).then((function(t){t&&(e.initPositions(),e.pos.name="")})):this.$message.error("职位名称不能为空！")},editPosition:function(e,t){Object.assign(this.updatePos,t),this.dialogVisible=!0},doUpdatePosition:function(){var e=this;this.putRequest("/system/basic/pos/",this.updatePos).then((function(t){t&&(e.initPositions(),e.dialogVisible=!1)}))},handleDeletePosition:function(e,t){var n=this;this.$confirm("此操作将永久删除["+t.name+"]职位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/system/basic/pos/"+t.id).then((function(e){e&&n.initPositions()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},initPositions:function(){var e=this;this.getRequest("/system/basic/pos/").then((function(t){t&&(e.positions=t)}))}}}),h=f,v=(n("9840"),Object(c["a"])(h,m,p,!1,null,"a568b496",null)),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"250px","margin-right":"10px"},attrs:{size:"small",placeholder:"添加职称","prefix-icon":"el-icon-plus"},model:{value:e.job.name,callback:function(t){e.$set(e.job,"name",t)},expression:"job.name"}}),n("el-select",{attrs:{size:"small",placeholder:"职称等级"},model:{value:e.job.titleLevel,callback:function(t){e.$set(e.job,"titleLevel",t)},expression:"job.titleLevel"}},e._l(e.titleLevel,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{staticStyle:{"margin-left":"10px","background-color":"#8eebff"},attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.addJob}},[e._v("\n            添加\n        ")])],1),n("div",{staticClass:"jobTable"},[n("el-table",{staticStyle:{width:"80%"},attrs:{data:e.jobLevel,stripe:"",border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"职称名称",width:"150"}}),n("el-table-column",{attrs:{prop:"titleLevel",label:"职称等级",width:"150"}}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"150"}}),n("el-table-column",{attrs:{label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{type:"success"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                    ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                    ")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.deleteJobs}},[e._v("\n            批量删除\n        ")])],1),n("el-dialog",{attrs:{title:"修改职称",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.updateForm}},[n("el-form-item",{attrs:{label:"职称名称","label-width":e.formLabelWidth}},[n("el-input",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}})],1),n("el-form-item",{attrs:{label:"职称等级","label-width":e.formLabelWidth}},[n("el-select",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:e.updateForm.titleLevel,callback:function(t){e.$set(e.updateForm,"titleLevel",t)},expression:"updateForm.titleLevel"}},e._l(e.titleLevel,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"是否启用","label-width":e.formLabelWidth}},[n("el-switch",{attrs:{size:"small","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"禁用"},model:{value:e.updateForm.enabled,callback:function(t){e.$set(e.updateForm,"enabled",t)},expression:"updateForm.enabled"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doUpdateJob}},[e._v("确 定")])],1)],1)],1)},g=[],x={name:"JobLevelMana",data:function(){return{job:{name:"",titleLevel:""},titleLevel:["正高级","副高级","中级","初级","员级"],jobLevel:[],dialogFormVisible:!1,updateForm:{name:"",titleLevel:"",enabled:!1},multipleSelection:[],formLabelWidth:"120px"}},mounted:function(){this.initLevels()},methods:{addJob:function(){var e=this;this.job.name&&this.job.titleLevel?this.postRequest("/system/basic/jobLevel/",this.job).then((function(t){t&&(e.initLevels(),e.job.name="",e.job.titleLevel="")})):this.job.name&&""==this.job.titleLevel?this.$message.error("职称等级不能为空！"):this.$message.error("职称名称不能为空！")},handleEdit:function(e,t){Object.assign(this.updateForm,t),this.dialogFormVisible=!0},doUpdateJob:function(){var e=this;this.putRequest("/system/basic/jobLevel/",this.updateForm).then((function(t){t&&(e.initLevels(),e.dialogFormVisible=!1)}))},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除["+t.name+"]职称, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/system/basic/jobLevel/"+t.id).then((function(e){e&&n.initLevels()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},deleteJobs:function(){var e=this;this.$confirm("此操作将永久删除["+this.multipleSelection.length+"]条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/jobLevel/"+t).then((function(t){t&&e.initLevels()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(e){this.multipleSelection=e},initLevels:function(){var e=this;this.getRequest("/system/basic/jobLevel/").then((function(t){t&&(e.jobLevel=t)}))}}},_=x,k=(n("455d"),Object(c["a"])(_,y,g,!1,null,"80c1c4f2",null)),w=k.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("奖惩规则")])},$=[],R={name:"EcMana"},P=R,j=Object(c["a"])(P,S,$,!1,null,"221d3d9b",null),L=j.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"permissMannTool"},[n("el-input",{attrs:{size:"small",placeholder:"请输入英文名称"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{attrs:{size:"small",placeholder:"请输入中文名称"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRole(t)}},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}}),n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.addRole}},[e._v("添加")])],1),n("div",{staticClass:"permissionManaMain"},[n("el-collapse",{attrs:{accordion:""},on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(t,i){return n("el-collapse-item",{key:i,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff1013"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(n){return e.delRole(t.id,t.nameZh)}}})],1),n("div",[n("el-tree",{key:i,ref:"tree",refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedMenus,data:e.allmenus,props:e.defaultProps}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelUpdate}},[e._v("取消修改")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.doUpdate(t.id,i)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},D=[],C={name:"PermissMana",data:function(){return{role:{name:"",nameZh:""},roles:[],allmenus:[],defaultProps:{children:"children",label:"name"},selectedMenus:[],activeName:"-1"}},mounted:function(){this.initRoles()},methods:{delRole:function(e,t){var n=this;this.$confirm("此操作将永久删除【"+t+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/system/basic/permission/role/"+e).then((function(e){e&&n.initRoles()}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},addRole:function(){var e=this;this.role.name&&this.role.nameZh?this.postRequest("/system/basic/permission/role/",this.role).then((function(t){t&&(e.role.nameZh="",e.role.name="",e.initRoles())})):this.$message.error("数据不能为空")},cancelUpdate:function(){this.activeName=-1},doUpdate:function(e,t){var n=this,i=this.$refs.tree[t],a=i.getCheckedKeys(!0),s="/system/basic/permission/?rid="+e;a.forEach((function(e){s+="&mids="+e})),this.putRequest(s).then((function(e){n.activeName=-1}))},change:function(e){e&&(this.initAllMenus(),this.initSelectedMenus(e))},initSelectedMenus:function(e){var t=this;this.getRequest("/system/basic/permission/mids/"+e).then((function(e){e&&(t.selectedMenus=e)}))},initAllMenus:function(){var e=this;this.getRequest("/system/basic/permission/menus").then((function(t){t&&(e.allmenus=t)}))},initRoles:function(){var e=this;this.getRequest("/system/basic/permission/").then((function(t){t&&(e.roles=t)}))}}},F=C,z=(n("c06a"),Object(c["a"])(F,M,D,!1,null,null,null)),E=z.exports,T={name:"SysBasic",components:{DepMana:d,PermissMana:E,EcMana:L,PosMana:b,JobLevelMana:w},data:function(){return{activeName:"first"}},comments:{DemMana:d,PosMana:b,JobLevelMana:w,EcMana:L,PermissMana:E},methods:{}},q=T,O=Object(c["a"])(q,i,a,!1,null,"e086d104",null);t["default"]=O.exports},"8f67":function(e,t,n){},9840:function(e,t,n){"use strict";var i=n("8ccb"),a=n.n(i);a.a},a331:function(e,t,n){},ac12:function(e,t,n){"use strict";var i=n("dc76"),a=n.n(i);a.a},c06a:function(e,t,n){"use strict";var i=n("8f67"),a=n.n(i);a.a},d1e3:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    备份恢复数据库\n")])},a=[],s={name:"SysData"},l=s,o=n("2877"),r=Object(o["a"])(l,i,a,!1,null,"378fd116",null);t["default"]=r.exports},dc76:function(e,t,n){},ed24:function(e,t,n){}}]);
//# sourceMappingURL=chunk-798ec4ae.bfd81d3d.js.map